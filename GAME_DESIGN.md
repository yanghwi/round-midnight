# Daily Dungeon - 게임 디자인 문서

## 컨셉

**한 줄 요약**: 하루 한 판, 4인 협동 던전 탈출 게임

**핵심 재미**
- 탐험 + 파밍 + 탈출
- 죽으면 다 잃는 긴장감
- 하루 한 번의 설렘
- 친구들과 가볍게 15분

**타겟**
- 30대 중반, 가정 있는 직장인
- 하루 10-15분 짬
- 복잡한 건 싫고 결과만 보고 싶음
- 아이폰 사파리, 침대에서 누워서

---

## 핵심 게임 루프

```
[하루 한 번]
     │
     ▼
[던전 입장] ← AI가 매일 다른 구조 생성
     │
     ▼
[탐험] ◀─────────────────────┐
     │ 실시간 이동            │
     │ 조이스틱               │
     │                       │
     ├── 적 조우 → [즉시 판정] │
     │            결과 팝업   │
     │                       │
     ├── 아이템 → 획득 ───────┤
     │                       │
     ├── 이벤트 → 선택지 ─────┤
     │                       │
     └── 포탈 → [탈출 성공]   │
              │              │
              ▼              │
         [보상 저장]         │
              │              │
              ▼              │
         [내일 또 만나!] ─────┘
```

---

## 하루 한 판 시스템

### 열쇠 시스템
- 매일 자정에 열쇠 1개 지급
- 최대 3개까지 누적 가능
- 던전 입장 시 열쇠 1개 소모

### 주말 보너스
- 토/일요일은 열쇠 2개 지급

### 파티 구성
- 2~4인 가변 파티
- 인원 적으면 난이도 자동 조정
- 4명 권장, 2명도 가능

---

## 탐험 모드

### 화면 구성
```
┌─────────────────────────────┐
│ 🗝️ 1  💰 1,240  ⏱️ 12:34   │ ← 열쇠, 골드, 경과시간
├─────────────────────────────┤
│                             │
│     ░░░░░###░░░░░           │
│     ░░░░░# #░░░░░           │
│     ####### ###░░           │
│     #     #   #░░           │
│     # @○○ # $ #░░           │ ← @본인 ○파티원 $아이템
│     #     #   #░░           │
│     ####  #####░░           │
│                             │
├─────────────────────────────┤
│      [조이스틱]    [인벤]   │
└─────────────────────────────┘
```

### 규칙
- 각자 실시간 이동
- 시야 공유 (파티원이 본 곳은 전부 공개)
- 파티원 위치 항상 표시
- 흩어지면 위험 (개별 전투 판정)

---

## 전투 시스템 (즉시 판정)

### 조우 → 판정 → 결과 (1초)

```
적 조우
    ↓
[자동 판정]
  - 파티 전투력 (장비 + 클래스)
  - 적 전투력
  - 랜덤 보정 (±20%)
    ↓
[결과 팝업]
┌─────────────────────────────┐
│                             │
│   🐺 늑대 무리 조우!        │
│                             │
│   ⚔️ 승리                   │
│                             │
│   철수 -15 HP               │
│   영수 -8 HP                │
│                             │
│   드랍: 늑대 가죽 x2        │
│         낡은 단검           │
│                             │
│         [확인]              │
│                             │
└─────────────────────────────┘
    ↓
탐험 계속
```

### 판정 결과
| 결과 | 설명 |
|------|------|
| 완승 | 피해 없음 |
| 승리 | 약간의 피해 |
| 신승 | 큰 피해, 누군가 빈사 |
| 패배 | 누군가 사망 + 장비 드랍 |
| 전멸 | 전원 사망, 게임 종료 |

### 전투력 공식
```
파티 전투력 = Σ(장비 공격력 + 클래스 기본값)
적 전투력 = 기본값 × 층수 보정
결과 = (파티 전투력 / 적 전투력) × 랜덤(0.8~1.2)
```

---

## 사망 / 탈출

### 사망
- HP 0 → 즉시 사망
- 해당 위치에 장비 드랍
- 유령 모드로 관전
- 파티원이 장비 회수 가능

### 탈출
- 포탈 도달 → 개별 탈출 가능
- 탈출한 장비만 영구 저장
- 먼저 탈출해도 OK (기다릴 필요 없음)

### 게임 종료 조건
- 전원 탈출 → 성공
- 전원 사망 → 실패
- 생존자 + 사망자 혼합 → 부분 성공

---

## 맵 / 난이도

### 맵 해금
| 맵 | 난이도 | 해금 조건 | 예상 시간 |
|-----|--------|-----------|-----------|
| 고블린 동굴 | 쉬움 | 기본 | 10분 |
| 버려진 광산 | 보통 | 동굴 3회 클리어 | 12분 |
| 고대 신전 | 어려움 | 광산 3회 클리어 | 15분 |
| 심연의 던전 | 지옥 | 신전 3회 클리어 | 20분 |

### 인원별 난이도 조정
| 인원 | 적 체력 | 적 공격력 |
|------|---------|-----------|
| 4명 | 100% | 100% |
| 3명 | 75% | 85% |
| 2명 | 50% | 70% |

---

## 클래스

| 클래스 | 전투력 보정 | 특수 능력 |
|--------|-------------|-----------|
| 전사 | +20% | 피해 분담 (파티 피해 감소) |
| 마법사 | +30% | 광역 판정 유리 |
| 성직자 | +10% | 전투 후 자동 힐 |
| 도적 | +15% | 숨긴 아이템 발견 확률 증가 |

---

## 아이템

### 등급
| 등급 | 색상 | 드랍 확률 |
|------|------|-----------|
| 일반 | 흰색 | 60% |
| 고급 | 초록 | 25% |
| 희귀 | 파랑 | 12% |
| 전설 | 보라 | 3% |

### 종류
- 무기: 전투력 증가
- 방어구: 피해 감소
- 액세서리: 특수 효과
- 소모품: HP 회복 (희귀!)

---

## AI 활용

### 던전 생성 (입장 시 1회)
```
입력: 맵 타입, 파티 구성, 평균 장비 레벨
출력:
  - 던전 구조 (방, 통로)
  - 적 배치
  - 아이템 배치
  - 이벤트 배치
  - 포탈 위치
```

### 이벤트 생성
```
트리거: 특정 방 진입
출력:
  - 상황 설명 (2-3문장)
  - 선택지 2-3개
  - 각 선택지 결과
```

### 전투 결과 연출
```
입력: 적 종류, 결과, 피해량
출력: 한 줄 상황 묘사
예: "늑대의 날카로운 발톱이 철수의 어깨를 스쳤다"
```

---

## 기술 스택

### 클라이언트
- React + TypeScript
- Phaser 3 (2D 맵 렌더링)
- Socket.io-client

### 서버
- Node.js + Express
- Socket.io
- Redis (세션, 열쇠 관리)

### AI
- Claude API

### 배포
- Vercel (클라이언트)
- Railway (서버)

---

## MVP 범위

### 포함
- 로비 (방 생성/참가)
- 열쇠 시스템 (하루 1개)
- 탐험 모드
- 자동 전투(5초)
- 1개 맵 (고블린 동굴)
- 4개 클래스
- 기본 아이템 50종
- AI 던전 생성
- AI 전투 스크립트 생성
- 탈출/사망 처리

### 제외
- 계정 시스템 (추후)
- 추가 맵 3개 (추후)
- 랭킹 (추후)
- 업적 (추후)
- AI 아이템 생성 (추후)

---

## 예상 개발 기간

| 주차 | 내용 |
|------|------|
| 1 | 프로젝트 셋업, 로비 |
| 2 | 실시간 연결, 방 시스템 |
| 3 | 탐험 모드 (맵, 이동) |
| 4 | 시야 시스템, 동기화 |
| 5 | 즉시 판정 전투 |
| 6 | AI 던전 생성 연동 |
| 7 | 아이템, 인벤토리 |
| 8 | 열쇠 시스템, 탈출/사망 |
| 9 | UI 다듬기, 밸런싱 |
| 10 | 테스트, 버그 수정, 배포 |

**총 약 2.5개월**

---

## 일일 플레이 시나리오

```
21:50 - 카톡: "야 오늘 던전 ㄱ?"
21:55 - 4명 접속, 방 입장
22:00 - 던전 시작
22:03 - 각자 탐험, 아이템 파밍
22:05 - 영수 적 만남, 승리 (HP -20)
22:07 - 철수 보물방 발견, 희귀템 획득
22:08 - 포탈 발견
22:10 - 전원 탈출 성공
22:11 - "내일 또 ㄱ" 해산

총 10분.
```
